<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WEREWOLF ONLINE PRO</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body id="game-body">

<div class="container">

    <!-- ── หน้าเข้าห้อง ── -->
    <div id="screen-auth" class="card">
        <h1 style="text-align:center; color:var(--primary); margin-bottom:20px;">WEREWOLF 🐺</h1>
        <input type="text" id="username" placeholder="ชื่อของคุณ">
        <input type="text" id="room-code" placeholder="รหัสห้อง 4 หลัก">
        <button class="btn-main" id="btn-create">สร้างห้องใหม่ (HOST)</button>
        <button class="btn-secondary" id="btn-join">เข้าร่วมห้องเพื่อน</button>
    </div>

    <!-- ── ล็อบบี้ ── -->
    <div id="screen-lobby" class="card hidden">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
            <h2 style="margin:0;">ROOM: <span id="display-room" style="color:var(--primary)">----</span></h2>
            <button class="btn-main" style="width:auto; margin:0; padding:8px 15px; font-size:0.9em; background:var(--guide);"
                onclick="window.open('rulesofww.pdf', '_blank')">📖 กฎและบทบาท</button>
        </div>
        <div id="player-list" style="margin-bottom:20px;"></div>

        <div id="gm-setup" class="hidden">
            <div style="background:rgba(255,255,255,0.05); padding:12px; border-radius:10px; margin-bottom:15px;">
                <label style="font-size:0.85em; opacity:0.7;">โอน GM:</label>
                <select id="select-gm" onchange="window.transferGM(this.value)"></select>
                <label style="display:flex; align-items:center; cursor:pointer; margin-top:10px;">
                    <input type="checkbox" id="use-events" style="width:auto; margin-right:10px;">
                    ใช้งานระบบเหตุการณ์ 🎲
                </label>
            </div>
            <div style="display:flex; justify-content:space-between; align-items:center; background:rgba(0,0,0,0.2); padding:10px; border-radius:8px;">
                <h3 style="margin:0;">บทบาท: <span id="count-sel">0</span> / <span id="count-total">0</span></h3>
                <div id="balance-score" style="font-weight:bold;">แต้มสมดุล: 0</div>
            </div>
            <div id="role-selector" style="max-height:380px; overflow-y:auto; margin-top:10px; border:1px solid #333; border-radius:10px;"></div>
            <button class="btn-main" id="btn-start-game" style="background:var(--v); color:#000; margin-top:20px;">เริ่มเกมเดี๋ยวนี้ 🏁</button>
        </div>
        <p id="wait-msg" style="text-align:center; color:#888;">⏳ รอ GM เริ่มเกม...</p>
    </div>

    <!-- ── หน้าเกม ── -->
    <div id="screen-game" class="card hidden">
        <div id="phase-label" style="text-align:center; font-weight:bold; padding:12px; border-radius:12px; margin-bottom:15px; color:white;"></div>

        <div id="event-display" class="hidden">
            <div style="color:var(--guide); font-size:0.8em; text-transform:uppercase; margin-bottom:5px;">🎲 เหตุการณ์ประจำวัน</div>
            <div id="event-text"></div>
        </div>

        <!-- GM View -->
        <div id="gm-view" class="hidden">
            <div class="live-counter">
                <div class="counter-item" style="color:var(--v)">🟢 รอด: <span id="cnt-alive">0</span></div>
                <div class="counter-item" style="color:var(--w)">💀 ตาย: <span id="cnt-dead">0</span></div>
                <div id="cnt-cult-box" class="counter-item hidden" style="color:var(--cult)">🔮 ลัทธิ: <span id="cnt-cult">0</span></div>
            </div>
            <button id="btn-roll" class="btn-main hidden" style="background:var(--guide); margin-bottom:15px;">🎲 ทอยเหตุการณ์</button>
            <table class="dashboard-table"><tbody id="gm-table-body"></tbody></table>
            <button class="btn-main"      id="btn-next" style="margin-top:20px;">เปลี่ยนช่วงเวลา ➡️</button>
            <button class="btn-secondary" id="btn-end"  style="margin-top:10px;">🚩 จบเกมและเฉลย</button>
        </div>

        <!-- Player View -->
        <div id="player-view" style="text-align:center; padding:30px 10px;">
            <div id="my-name" style="font-size:1em; color:#888; margin-bottom:4px;"></div>
            <h1 id="my-role" style="color:var(--v); font-size:2.8em; margin:10px 0;">...</h1>
            <button id="btn-toggle-drunk" class="hidden"
                style="background:var(--drunk); color:white; width:auto; padding:6px 18px; margin:0 auto 10px; display:block; border-radius:8px; border:none; cursor:pointer; font-size:0.9em;">
                👁️ ดูบทบาทที่แท้จริง
            </button>
            <p id="my-desc" style="color:#aaa; font-size:0.95em; line-height:1.4;"></p>
            <div id="my-status" style="margin-top:25px; font-size:1.3em; font-weight:bold; padding:10px; border-radius:10px; background:rgba(0,0,0,0.3);"></div>
        </div>
    </div>

    <!-- ── หน้าสรุปผล ── -->
    <div id="screen-result" class="card hidden">
        <h2 style="text-align:center; color:var(--primary);">🏁 สรุปผล</h2>
        <div id="result-list"></div>
        <button id="btn-gm-back" class="btn-main hidden" style="background:var(--guide); margin-top:20px;">🔙 กลับล็อบบี้</button>
    </div>

</div>

<script type="module" src="script.js"></script>
</body>
</html>
